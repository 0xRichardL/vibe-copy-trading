syntax = "proto3";

package bus.v1;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/0xRichardL/vibe-copy-trading/libs/go/domain/bus/v1;busv1";

// OrderSide enumerates the desired trade side semantics.
enum OrderSide {
  ORDER_SIDE_UNSPECIFIED = 0;
  ORDER_SIDE_BUY = 1;
  ORDER_SIDE_SELL = 2;
  ORDER_SIDE_OPEN = 3;
  ORDER_SIDE_CLOSE = 4;
}

// OrderType captures the desired order style at the venue.
enum OrderType {
  ORDER_TYPE_UNSPECIFIED = 0;
  ORDER_TYPE_MARKET = 1;
  ORDER_TYPE_LIMIT = 2;
}

// TimeInForce represents the lifetime policy for the order at the venue.
enum TimeInForce {
  TIME_IN_FORCE_UNSPECIFIED = 0;
  TIME_IN_FORCE_GTC = 1;
  TIME_IN_FORCE_IOC = 2;
  TIME_IN_FORCE_FOK = 3;
}

// ExecutionRequestSource identifies the upstream producer of the execution request.
enum ExecutionRequestSource {
  EXECUTION_REQUEST_SOURCE_UNSPECIFIED = 0;
  EXECUTION_REQUEST_SOURCE_MATCHER_V1 = 1;
}

// ExecutionRequest encapsulates a normalized execution intent emitted by the matcher.
message ExecutionRequest {
  string execution_request_id = 1;
  string signal_id = 2;
  string influencer_id = 3;
  string subscriber_id = 4;
  string subscription_id = 5;
  string market = 6;
  OrderSide side = 7;
  OrderType order_type = 8;
  double quantity = 9;
  double notional = 10;
  double price = 11;
  double leverage = 12;
  TimeInForce time_in_force = 13;
  bool risk_checks_passed = 14;
  string rejection_reason = 15;
  ExecutionRequestSource source = 16;
  google.protobuf.Timestamp created_at = 17;
  string trace_id = 18;
  string correlation_id = 19;
}
